%p#notice= notice

%p
  = @entry.blog.title
%p
  %b Title:
  = @entry.title
%p
  %b Body:
  = @entry.body

= link_to 'Edit', edit_blog_path(@entry.blog)
\|
= link_to 'Back', blog_path

%p Listing comments

%table
  %thead
    %tr
      %th Body
      %th
      %th
      %th
      %th
      %th

  %tbody
    - @entry.comments.each do |comment|

      %tr
        - if comment.status == 'approved'
          %td= comment.body
          %td
        - else
          %td= '(承認待ち)'
          %td
            = form_for comment do |f|
              .field
                = f.hidden_field :body
              .field
                = f.hidden_field :status, :value => 'approved'
              .field
                = f.hidden_field :entry_id
              .field
                = f.hidden_field :blog_id, :value => @entry.blog_id
              .actions
                = f.submit 'Approved'
        %td= link_to 'Destroy', comment, method: :delete, data: { confirm: 'Are you sure?' }

%br

%p New comments
= form_for @comment do |f|
  - if @comment.errors.any?
    #error_explanation
      %h2= "#{pluralize(@comment.errors.count, "error")} prohibited this comment from being saved:"
      %ul
        - @comment.errors.full_messages.each do |message|
          %li= message

  .field
    = f.label :body
    = f.text_area :body
  .field
    = f.hidden_field :status
  .field
    = f.hidden_field :entry_id
  .field
    = f.hidden_field :blog_id, :value => @entry.blog_id
  .actions
    = f.submit 'Save'
